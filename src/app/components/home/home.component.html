<app-header></app-header>
<div style="width: 100%; height: calc(100% - 50px); background: whitesmoke;">
  <as-split direction="horizontal" unit="percent" useTransition="true" disabled="true">
    <as-split-area [size]="leftSidebar" minSize="5" maxSize="20">
      <button (click)="sidebarAction()">notice me</button>
    </as-split-area>
    <as-split-area [size]="rightSidebar">

      <div class="chat-container" *ngIf="authenticationService.user$ | async as user">
        <div class="message-container" *ngFor="let message of messages; index as index; trackBy: trackByUid" [class.to-right]="user.uid === message.uid">
          <span *ngIf="showMessageSender(index) && user.uid !== message.uid">
            <mat-icon>person</mat-icon>
          </span>
          <div class="message" [class.own-message]="user.uid === message.uid">
            <div class="sender" *ngIf="showMessageSender(index)">
              {{message.from}}
              <span class="timestamp">
              {{message.timestamp?.seconds * 1000 | date: 'yyyy.MM.dd HH:mm'}}
            </span>
            </div>
            {{message.text}}
          </div>
          <span *ngIf="showMessageSender(index) && user.uid === message.uid">
            <mat-icon>person</mat-icon>
          </span>
        </div>
        <div class="scrollRef" #scrollRef></div>
      </div>

      <footer class="chat-footer">
        <emoji-mart class="emoji-mart" (emojiSelect)="addEmoji($event)" *ngIf="showEmojiPicker" title="Pick your emojiâ€¦"></emoji-mart>
        <form (ngSubmit)='sendMessage()'>
          <button
            type="button"
            class="toggle-emoji"
            (click)="toggleEmojiPicker()">
            <i-feather name="smile"></i-feather>
          </button>
          <input placeholder="Type some shit and hit enter to send" type="text" name="message" [(ngModel)]="text">
        </form>
      </footer>
    </as-split-area>
  </as-split>
</div>
